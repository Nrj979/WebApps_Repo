{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <title> CommunDeliver </title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <link rel="stylesheet" href="{% static 'css/styles.css' %}">
        <link rel="stylesheet" href="{% static 'css/login.css' %}">
        <link rel="stylesheet" href="{% static 'css/loginStyle.css' %}">
        <link rel="stylesheet" href="{% static 'fonts/icomoon/style.css' %}">

        <link rel="stylesheet" href="{% static 'css/owl.carousel.min.css' %}">
        <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">


        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400&display=swap" rel="stylesheet">

       
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <style>
    
            .btn {
                width: 150px; 
                height: 35px;
            }
        
        </style>

    </head>
    <script>
        $(document).ready(function(){
            $('.home').click(function(){
                window.location.assign("{% url 'home_page' %}")
            })
        })
    </script>
    <body>
        <div class="topnav">
        </div>

        <script>
            $(document).ready(function() {
                $('.btn').click(function(){
                    uname = $('#nameid').val()
                    umail = $('#mailid').val()
                    uproof = $('#prooftype').val()
                    uproofid = $('#proofid').val()
                    upwd = $('#pwdid').val()
                    uphone = $('#phoneid').val()
                    uvehicle = $("#vehicleid").val()
                    umodel = $("#modelid").val()

                    // alert(uperson);
                    $.ajax({
                        url: '/register_partner/',
                        dataType: 'json',
                        method: 'POST',
                        data:{
                            "name": uname,
                            "mail": umail,
                            "password": upwd,
                            "proof":uproof,
                            "proofid":uproofid,
                            "phone": uphone,
                            "umodel": umodel,
                            "vehicle":uvehicle,
                        },
                        success: function(any){
                            // alert(any);
                            if(any.result == 'yes'){
                                alert("Registered Successfully")
                            window.location.assign("{% url 'login_page' %}")
                            } else{
                                alert("Registration Failed!!..")
                            }
                            
                        }
                    });
                });
            });
        </script>
        <div>
            {% for message in messages %}
            <h4>{{message}}</h4>
            {% endfor %}
        </div>

<div class="card">
    <div class="text-center mb-5">
        <h3>SignUp to <strong>CommunDeliver</strong></h3>
    </div>

    <div class="login">
        <form>
          
            <label for="name">Name: </label>  
            <input type="text" placeholder="jacob" class="input_field"name="name" id="nameid" required><br>
            <label for="email">Email: </label>
            <input type="email" placeholder="abc@mail.com" class="input_field" name="email" id="mailid" required><br>
            <label for="proof">ID Proof Type: </label>
            <input type="text" class="input_field" name="proof" id="prooftype" list="ptype" placeholder="Select ID Proof Type" required><br>
            <datalist id="ptype">
              <option value="Citizenship Card">
              <option value="Driving License">
              <option value="Passport">
              <option value="Permenant Resident Card">

            </datalist>
           
            <label for="proofid">ID Number: </label>
            <input type="text" class="input_field" name="proofid" id="proofid" required><br>
            <div class="password-container">
                <label for="pwd">Password: </label>
                <input type="password" class="input_field" placeholder="**************" name="password" id="pwdid" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required><br>
                <span toggle="#pwdid" class="toggle-password">Show</span>
                   
            </div>         
              
            <label for="phone">Contact Number: </label>
            <input type="text" class="input_field" placeholder="+1 xxxxxxxxxx" name="phone" id="phoneid" pattern="^\+[0-9]{1,3}\.?[0-9-()\s]{7,15}+$" title="Please fill out the contact number in right format!!.." required><br>

            <label for="model">Vehicle model: </label>
            <input type="text" class="input_field" placeholder="Kia Sorento X440" name="model" id="modelid"><br>

            <label for="vehicleno">Vehicle Number: </label>
            <input type="text" class="input_field" placeholder="WD 568" name="vehicleno" id="vehicleid"><br>

            <div class="cen">
                <input type="submit" class="btn" value="SignUp">
            </div>

        </form>
       

       </div>
       <div class="cen">
        <form action="{% url 'login_page' %}">
            <input type="submit"  class="btn" value="SignIn">

        </form>
    </div>
</div>
        

  
    </body>
    <script>
        $(document).ready(function () {
            $('.toggle-password').click(function () {
                var passwordField = $($(this).attr("toggle"));
                if (passwordField.attr("type") === "password") {
                    passwordField.attr("type", "text");
                    $(this).text("Hide");
                } else {
                    passwordField.attr("type", "password");
                    $(this).text("Show");
                }
            });
        });
    </script>
    <script>
        function validateForm() {
            var password = document.getElementById("pwdid").value;
            var confirmPassword = document.getElementById("pwdid2").value;
    
            if (password !== confirmPassword) {
                alert("Password and Confirm Password do not match.");
                return false; 
            }
    
            return true;
        }
    </script>     
</html>